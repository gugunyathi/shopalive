(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23558,e=>{"use strict";var a=e.i(69858),t=e.i(33847),r=e.i(46048),s=e.i(40034);class o extends r.BaseError{constructor({callbackSelector:e,cause:a,data:t,extraData:r,sender:o,urls:n}){super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],a.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map(e=>`    ${(0,s.getUrl)(e)}`)],`  Sender: ${o}`,`  Data: ${t}`,`  Callback selector: ${e}`,`  Extra data: ${r}`].flat(),name:"OffchainLookupError"})}}class n extends r.BaseError{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,s.getUrl)(a)}`,`Response: ${(0,t.stringify)(e)}`],name:"OffchainLookupResponseMalformedError"})}}class c extends r.BaseError{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${a}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}var i=e.i(4102),l=e.i(40623),d=e.i(17767),u=e.i(66755),p=e.i(71393),f=e.i(47398),h=e.i(24449);let y={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function m(e,{blockNumber:t,blockTag:r,data:s,to:n}){let{args:i}=(0,l.decodeErrorResult)({data:s,abi:[y]}),[f,m,g,w,k]=i,{ccipRead:R}=e,E=R&&"function"==typeof R?.request?R.request:b;try{if(!(0,u.isAddressEqual)(n,f))throw new c({sender:f,to:n});let s=m.includes(h.localBatchGatewayUrl)?await (0,h.localBatchGatewayRequest)({data:g,ccipRequest:E}):await E({data:g,sender:f,urls:m}),{data:o}=await (0,a.call)(e,{blockNumber:t,blockTag:r,data:(0,p.concat)([w,(0,d.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[s,k])]),to:n});return o}catch(e){throw new o({callbackSelector:w,cause:e,data:s,extraData:k,sender:f,urls:m})}}async function b({data:e,sender:a,urls:r}){let s=Error("An unknown error occurred.");for(let o=0;o<r.length;o++){let c=r[o],l=c.includes("{data}")?"GET":"POST",d="POST"===l?{data:e,sender:a}:void 0,u="POST"===l?{"Content-Type":"application/json"}:{};try{let r,o=await fetch(c.replace("{sender}",a.toLowerCase()).replace("{data}",e),{body:JSON.stringify(d),headers:u,method:l});if(r=o.headers.get("Content-Type")?.startsWith("application/json")?(await o.json()).data:await o.text(),!o.ok){s=new i.HttpRequestError({body:d,details:r?.error?(0,t.stringify)(r.error):o.statusText,headers:o.headers,status:o.status,url:c});continue}if(!(0,f.isHex)(r)){s=new n({result:r,url:c});continue}return r}catch(e){s=new i.HttpRequestError({body:d,details:e.message,url:c})}}throw s}e.s(["ccipRequest",()=>b,"offchainLookup",()=>m,"offchainLookupAbiItem",()=>y,"offchainLookupSignature",()=>"0x556f1830"],23558)}]);